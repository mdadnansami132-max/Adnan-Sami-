module.exports.config = {
    name: "war",
    version: "2.0.0",
    hasPermssion: 0,
    credits: "CHATGPT",
    description: "Start roast war",
    commandCategory: "fun",
    usages: "war @mention",
    cooldowns: 2
};

const ownerUID = "100047693744912";

let activeWars = {}; // threadID тЖТ intervalID

module.exports.run = async function ({ api, event, args }) {

    // Only owner can use
    if (event.senderID !== ownerUID)
        return api.sendMessage("ржПржЗ ржХржорж╛ржирзНржб рж╢рзБржзрзБ ржорж╛рж▓рж┐ржХ ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗ!", event.threadID);

    let mention = Object.keys(event.mentions)[0];
    if (!mention) return api.sendMessage("Tag someone!", event.threadID);

    const targetName = event.mentions[mention].replace(/@/g, "");
    const threadID = event.threadID;

    // Already running?
    if (activeWars[threadID])
        return api.sendMessage("War ржЖржЧрзЗржЗ ржЪрж▓ржЫрзЗ! ржерж╛ржорж╛рждрзЗ stopwar ржжрж╛ржУред", threadID);

    // 100 funny roast lines
    const roastLines = [
        "ржнрж╛ржЗ, рждрзЛржорж╛рж░ рж▓ржЬрж┐ржХ ржжрзЗржЦрзЗ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░ржУ рж╢ржХ ржЦрж╛рзЯ ЁЯШВ",
        "рждрзБржорж┐ ржХржерж╛ ржмрж▓рж▓рзЗ ржирзЗржЯржУ ржзрзАрж░ рж╣рзЯрзЗ ржпрж╛рзЯ!",
        "рждрзЛржорж╛рж░ ржЖржЗржбрж┐рзЯрж╛ржЧрзБрж▓рзЛ NASA рж░рж┐рж╕рж╛рж░рзНржЪрзЗржУ ржмрзЛржЭрж╛ ржпрж╛ржмрзЗ ржирж╛ ЁЯдг",
        "рждрзБржорж┐ ржПржд рж╕рзНржорж╛рж░рзНржЯ ржпрзЗ ржЧрзБржЧрж▓ржУ рждрзЛржорж╛ржХрзЗ ржкрзНрж░рж╢рзНржи ржХрж░рзЗ!",
        "рждрзЛржорж╛рж░ ржХржерж╛ рж╢рзБржирзЗ ржорж╛ржЗржХржУ mute рж╣рзЯрзЗ ржпрж╛рзЯ ЁЯШЖ",
        "ржЕржирж▓рж╛ржЗржирзЗ рждрзБржорж┐ ржЖрж╕рж▓рзЗржЗ ржХрж┐ржВтАж рж╢рзБржзрзБ ржирж┐ржЬрзЗрж░ ржоржирзЗ!",
        "рждрзЛржорж╛рж░ рж╕рзНржкрж┐ржб ржжрзЗржЦрзЗ ржЖржорж╛рж░ ржУрзЯрж╛ржЗржлрж╛ржЗ ржЖрждрзНржорж╣рждрзНржпрж╛ ржХрж░рждрзЗ ржЪрж╛рзЯ ЁЯТА",
        "рждрзЛржорж╛ржХрзЗ ржжрзЗржЦрзЗ ржоржирзЗ рж╣рзЯ RAM 512MB ЁЯШн",
        "рждрзБржорж┐ reply ржжрж┐рждрзЗ ржжрж┐рждрзЗржЗ ржЖржорж╛рж░ ржШрзБржо ржкрзЗрзЯрзЗ ржпрж╛ржЪрзНржЫрзЗ ЁЯШк",
        "рждрзЛржорж╛рж░ ржорзЗржорж░рж┐ ржХрж╛рж░рзНржб ржХрзЛржерж╛рзЯ? Reset ржжрж░ржХрж╛рж░ ЁЯШн",
        "ржмрзНрж░рзЛ, рждрзБржорж┐ ржЖрж╕рж▓рзЗржЗ рж╣рзЗржнрж┐ ржУрзЯрзЗржЯтАФржоржЧржЬрзЗ ржирж╛, ржХржерж╛рзЯ!",
        "рждрзЛржорж╛ржХрзЗ ржжрзЗржЦрж▓рзЗ рж▓рзЛржбрж┐ржВ рж▓рзЛржбрж┐ржВ ржоржирзЗ рж╣рзЯ ЁЯМР",
        "рждрзЛржорж╛рж░ ржЬрзНржЮрж╛ржи ржжрзЗржЦрзЗ ржмржЗржЧрзБрж▓рзЛ ржХрж╛ржБржжрзЗ ЁЯУЪ",
        "рждрзБржорж┐ ржПржд рж╕рзНрж▓рзЛ ржпрзЗ ржПрж╕ржПржоржПрж╕ржУ ржЖржЧрзЗ ржкрзМржБржЫрзЗ ржпрж╛рзЯ!",
        "рждрзБржорж┐ ржорж┐ржо рж╣рж▓рзЗ ржХрзЗржЙ рж╢рзЗрзЯрж╛рж░ ржХрж░ржд ржирж╛ ЁЯШн",
        "рждрзЛржорж╛рж░ рж▓рзЗржнрзЗрж▓ ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ ржорж╛ржЗржХрзНрж░рзЛрж╕рзНржХрзЛржк рж▓рж╛ржЧржмрзЗ ЁЯФм",
        "ржнрж╛ржЗ, рждрзБржорж┐ ржЖрж╕рж▓рзЗржЗ ржЕржирж▓рж╛ржЗржи ржмрж┐рж╢рзНржмрзЗрж░ ржмрж╛ржлрж╛рж░рж┐ржВ ЁЯМА",
        "рждрзЛржорж╛рж░ ржоржЧржЬрзЗ ржХрж┐ ржПрзЯрж╛рж░ржкрзНрж▓рзЗржи ржорзЛржб ржЕржи? тЬИя╕П",
        "рждрзБржорж┐ ржмрж▓рж▓рзЗржЗ ржмрж╛рждрж╛рж╕ржУ рж╣рж╛рж▓ржХрж╛ рж╣рзЯрзЗ ржпрж╛рзЯ ЁЯдг",
        "ржмрзНрж░рзЛ, рждрзЛржорж╛рж░ ржоржд ржХржиржлрж┐ржЙржЬржб ржорж╛ржирзБрж╖ ржкрзГржерж┐ржмрзАрждрзЗ ржХржо!"
    ];

    // expand to 100 lines
    while (roastLines.length < 100) {
        roastLines.push(roastLines[Math.floor(Math.random() * 20)]);
    }

    let count = 0;

    api.sendMessage(`ЁЯФе War started on @${targetName}`, threadID, null, event.messageID);

    const intervalID = setInterval(() => {
        if (count >= 100) {
            clearInterval(intervalID);
            delete activeWars[threadID];
            return api.sendMessage("тЪФя╕П War finished.", threadID);
        }

        api.sendMessage({
            body: `${count + 1}. ${roastLines[count]}`,
            mentions: [{ id: mention, tag: targetName }]
        }, threadID);

        count++;

    }, 1500);

    activeWars[threadID] = intervalID;
};
